{% extends 'base.html' %}

{% load partials %}
{% load crispy_forms_tags %}
<!-- StartPartial carrier-form -->
{% startpartial carrier-form %}
<form id="carrier-form" hx-post="{{ request.path }}" hx-target="#table_id_carrier" hx-swap="beforeend"
    class="modal-content">
    <div class="modal-header">
        <h5 class="modal-title">Add Carrier</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">{% crispy form %}</div>
    <div class="modal-footer">
        <button type="submit" class="btn btn-primary" id="btn-id-save">Save</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
    </div>
</form>
{% endpartial %}
<!-- EndPartial carrier-form -->
<!-- Startpartial carrier-row -->
{% startpartial carrier-row %}
<tr>
    <th scope="row">{{carrier.id}}</th>
    <td>{{carrier.carrier}}</td>
    <td>{{carrier.name}}</td>
    <td>{{carrier.address}}</td>
    <td class="text-center"><span>{% if carrier.active %}<i class="bi bi-check-square"></i>
            {% else %}<i class="bi bi-square-fill"></i>{% endif %}</span></td>
    <td><span class="hover hover-danger" hx-delete="{% url 'delete_carrier' carrier.id %}"><i class="bi bi-trash3"></i>
    </td>
</tr>
{% endpartial %}
<!-- Endpartial carrier-row -->

{% block content %}
<div class="row">
    <div class="col-md-4 ps-0"><button type="button" class="btn btn-primary" hx-get="{% url 'add_carrier' %}"
            hx-target="#dialog">
            Add Carrier</button></div>
</div>
<div class="row">
    <table class="table table-striped table-hover caption-top">
        <caption class="fs-4">Carriers</caption>
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Carrier</th>
                <th scope="col">Name</th>
                <th scope="col">Address</th>
                <th scope="col" class="text-center">Active</th>
                <th scope="col"></th>
            </tr>
        </thead>
        <tbody class="table-group-divider" id="table_id_carrier" hx-confirm="Are you sure?" hx-target="closest tr"
            hx-swap="outerHTML swap:1s">
            {% for carrier in carriers %}
            <tr>
                <th scope="row">{{carrier.id}}</th>
                <td>{{carrier.carrier}}</td>
                <td>{{carrier.name}}</td>
                <td>{{carrier.address}}</td>
                <td class="text-center"><span>{% if carrier.active %}<i class="bi bi-check-square"></i>
                        {% else %}<i class="bi bi-square-fill"></i>{%endif %}</span></td>
                <td><span class="hover hover-danger" hx-delete="{% url 'delete_carrier' carrier.id %}"><i
                            class="bi bi-trash3"></i></span></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<!-- Placeholder for the modal -->
<div id="modal" class="modal fade">
    <div id="dialog" class="modal-dialog" hx-target="this"></div>
</div>
{% endblock %}